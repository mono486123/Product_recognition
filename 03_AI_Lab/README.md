這是一份根據您提供的研發紀錄與技術規範，完整轉換而成的 `README.md` 檔案。我已確保文字**一字不漏**，並優化了 Markdown 排版以提升閱讀體驗。

---

# 🛒 雜貨店商品辨識 AI 研發中心 (03_AI_Lab)

本目錄記錄了從 10 類商品初步測試，到最終轉向 **31 類冰箱飲料精準辨識** 的完整 AI 研發歷程與技術規範。

## 🎯 研發目標

* **精準度與召回率**：追求 Precision > 93% / Recall > 90% 的實用指標。
* **跨平台部署**：攻克 Windows 環境限制，產出手機端可用的 `.tflite` (Float32) 權重。
* **商業轉型**：12/31 後轉向 SKU 系統整合，實現辨識與價格自動關聯。

---

## 🛠️ Git 版本控制規範 (SOP)

為了確保專案結構清晰，避免錯誤上傳大型模型檔或造成版本混亂，請遵循以下操作規範：

### 1. 單獨檔案控制 (避免影響其他修改)

當專案中有大量 untracked 檔案，但您只想提交特定的腳本時，請按照下列步驟操作：

1. **確認路徑**：執行 `git status` 查看變動。
2. **精確加入**：禁止使用 `git add .`，請直接指定檔案路徑：
```bash
git add 03_AI_Lab/train_grocery_model.py

```


3. **確認狀態**：再次輸入 `git status`，確保只有目標檔案變為綠色（Changes to be committed）。
4. **提交與推送**：
```bash
git commit -m "Update training script with manual flipping logic"
git push origin main

```



### 2. 重要 Git 觀念

* **Commit 不會刪舊檔**：每次 Commit 都是建立「快照」，舊版本永久存在於 Git 歷史中，隨時可回復。
* **演習功能 (Dry-run)**：使用 `git add 03_AI_Lab -n` 可先行預覽哪些檔案「將會」被加入暫存區。
* **⚠️ 禁止巢狀倉庫**：若出現 `adding embedded git repository` 警告，代表資料夾內藏有舊的 `.git/` 目錄。請務必刪除內層 `.git`：
* Windows: `rmdir /s /q .git`
* Mac/Linux: `rm -rf .git`



---

## 📅 開發紀錄詳誌 (Development Log)

### 2023/12/14 - 12/16：環境建置與 TFLite 攻堅戰

* **12/14**：啟動 Roboflow 標註 Top10，確認所有資料夾與 Data 名稱均無中文。
* **12/15**：
* **【標註完成】**：完成 Top10 初版並加入翻轉與噪音增強；確認 `.gitignore` 已配置於根目錄。
* **【環境衝突】**：在 Windows 嘗試匯出 `.tflite` 遭遇嚴重相容性阻礙。由於 `ai-edge-litert` 處理不支援 Windows，決議將環境全面轉移至 WSL (Ubuntu)。
* **【技術妥協】**：因量化校準引用問題，捨棄 INT8 量化，改採 **Float32 穩定模式** 以確保模型在手機端運行成功。
* **【GPU 環境】**：重新配置 CUDA 11.8 與 PyTorch GPU 版本：
```bash
pip install torch torchvision torchaudio

```




* **12/16**：確認訓練流程可自動生成 `.onnx`。初步測試顯示辨識度仍有提升空間，需增加數據多樣性。

### 2023/12/17 - 12/21：數據增強與策略優化

* **12/17**：維持 117 張精選圖片。決議改由 YOLO 內部實施 Augmentation 而非手動增加重複圖片。
* **12/17：【關鍵增強邏輯】**
* **多樣背景**：包含櫃檯、層架、手持等多種實景。
* **動態光線**：日光、室內強光、陰影交替拍攝。
* **極端姿勢**：旋轉 45 度、側面/背面拍攝。
* **遮擋模擬**：故意讓商品堆疊，訓練模型具備「看一半標籤也能認出」的能力。
* **負樣本**：加入 10 張雜貨店背景空圖（fake_background），大幅減少模型亂認東西的機率。


* **12/21**：完成系統與畫面設計，正式開啟 V2 全商品辨識計畫。

### 2023/12/25 - 12/30：大規模訓練與轉向決策

* **12/25**：結束所有拍攝任務。採取「全量重新下載」Roboflow 標籤策略，解決與線下 Excel ID 對應混亂的問題。
* **12/28：【效能評估】** 手機安裝測試。數據顯示 Precision: 90.96% 但 Recall: 36.93%。診斷為模型過於保守，導入 `Calculate_id.py` 分析類別分佈。
* **12/29：【重大轉折】**
* 因應 V2 辨識瓶頸，決定放棄 YOLOv11n (Nano)，升級至 **YOLOv11s/m**。
* **策略調整**：不再追求海量圖庫，改採「少量、高品質、多角度」影像策略。
* **範圍收斂**：專攻 **冰箱內 31 類飲料** 項目。


* **12/30：【階段性勝利】** 確認飲料識別方案準度 Precision 突破 80%，確認技術路線可行。

---

## 📂 研發工具箱 (Internal Tools)

| 工具檔案 | 核心職責 |
| --- | --- |
| `main.py` | YOLOv11 訓練核心，負責訓練流程管理。 |
| `Calculate_id.py` | 統計各類別比例，確保數據平衡，防止模型產生偏見。 |
| `test_and_augment.py` | 執行動態「黃金比例」辨識驗證，確保 Precision 與 Recall 的穩定性。 |
| `resume_train.py` | 斷點續訓工具，防止環境意外中斷導致進度遺失。 |

---

這份文件是否符合您的需求？如果需要我協助將此內容直接存成檔案或進行其他調整，請隨時告訴我！